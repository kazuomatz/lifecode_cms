<!---
#  _list.html.erb
#  Generated by LifeCodeCMS Scaffold Generator
-->

<div class="card search-box form">
  <div class="card-header">
    <strong><i class="fas fa-search"></i>　<%= Settings.form.label.search %></strong>
  </div>
  <div class="card-body">
    <div class="row">
      <%- column = LoginHistory.form_column('name') -%>
      <div class="col-sm-4">
        <div class="form-group">
          <label for="<%= column[:name] %>"><%= column[:label] %></label>
          <input type="text" class="form-control" id="<%= column[:name] %>" name="<%= column[:name] %>" value="<%= params[:name] %>"/>
        </div>
      </div>
      <div class="col-sm-5">
        <div class="form-group">
          <label>ステイタス</label>
          <div class="_container-radio">
            <div class="form-inline">
              <input type="radio" value="99" checked="checked" name="status" id="status_all"/>
              <label class="form-check-label" for="status_all">すべて</label>
              <input type="radio" value="1" name="status" id="status_1"/>
              <label class="form-check-label" for="status_1">成功</label>
              <input type="radio" value="0" name="status" id="status_2"/>
              <label class="form-check-label" for="status_2">失敗</label>
              <input type="radio" value="-1" name="status" id="status_-1"/>
              <label class="form-check-label" for="status_-1">ロック</label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="form-group">
          <label for="start_at">開始日時</label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
            </div>
            <input type="text" name="start_at" class="form-control _input-date" value="<%= @start_at.present? ? @start_at.strftime('%Y/%m/%d') : '' %>"/>
            <span class="text-week"></span>
          </div>
        </div>
      </div>
      <div class="col-sm-2">
        <div class="form-group">
          <label for="start_at">　</label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="far fa-clock"></i></span>
            </div>
            <input type="text" name="start_at_time" class="form-control _input-time" value="<%= @start_at.present? ? @start_at.strftime('%H:%M') : '' %>"/>
          </div>
        </div>
      </div>

      <div class="col-sm-3">
        <div class="form-group">
          <label for="start_at">終了日時</label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
            </div>
            <input type="text" name="end_at" class="form-control _input-date" value="<%= @end_at.present? ? @end_at.strftime('%Y/%m/%d') : '' %>"/>
            <span class="text-week"></span>
          </div>
        </div>
      </div>
      <div class="col-sm-2">
        <div class="form-group">
          <label for="start_at">　</label>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="far fa-clock"></i></span>
            </div>
            <input type="text" name="end_at_time" class="form-control _input-time" value="<%= @end_at.present? ? @end_at.strftime('%H:%M') : '' %>"/>
          </div>
        </div>
      </div>
      <hr/>
      <div class="col-sm-12 search-box-buttons">
        <button type="button" class="clear-button btn btn-primary btn-lg">
          <i class="fas fa-redo"></i> <%= Settings.form.label.clear %></button>
        <button type="button" class="search-button btn btn-primary btn-lg">
          <i class="fas fa-search"></i> <%= Settings.form.label.search %></button>
      </div>
    </div>
  </div>
</div>


<%- content_for :add_js do %>
  <script>
    // search Parameter
    function searchParams() {
      return {
        'page': '<%= params[:page] || 1 %>',
        'name': $('[name="name"]').val(),
        'user_type': $('[name="user_type"]').val(),
        'status': $('[name="status"]:checked').val(),
        'start_at': $('[name="start_at"]').val(),
        'start_at_time': $('[name="start_at_time"]').val(),
        'end_at': $('[name="end_at"]').val(),
        'end_at_time': $('[name="end_at_time"]').val()
      };
    }

    $(function () {
      new FormManager({el: '.search-box'}).init();
    })
  </script>
<%- end %>
